# 前端开发规范文档

## 📋 开发流程规范

### 1. 开发前必读设计文档

**重要规则**：在进行任何模块的开发任务前，**必须先查看** `docs/` 目录下对应模块的设计文档。

#### 1.1 设计文档位置

所有模块的设计文档都位于 `docs/design/` 目录下：

```
docs/
├── README.md                # 文档导航
├── guide/                   # 开发指南目录
│   └── DEVELOPMENT_RULES.md # 开发规范（本文档）
├── design/                  # 设计文档目录
│   ├── ARCHITECTURE.md      # 架构设计文档
│   ├── API_INTEGRATION.md   # API集成文档
│   └── auth/                # 认证模块
│       └── FRONTEND_AUTH.md # 前端认证系统设计
└── deploy/                  # 部署文档目录
    └── README.md            # 部署文档索引
```

#### 1.2 开发流程

1. **接收开发任务**
   - 明确要开发的模块（如：认证模块、工作流模块、组件开发）

2. **查阅设计文档** ⚠️ **必须步骤**
   - 进入 `docs/design/` 目录
   - 阅读相关的设计文档：
     - 开发新功能：先看 `../design/ARCHITECTURE.md` 了解架构
     - 集成API：查看 `../design/API_INTEGRATION.md`
     - 开发认证相关：查看 `../design/auth/FRONTEND_AUTH.md`
   - 理解：
     - 组件设计
     - 状态管理设计
     - API调用方式
     - 路由设计
     - 权限控制设计

3. **确认理解**
   - 确保理解设计文档中的所有内容
   - 如有疑问，先与前端架构师/技术负责人确认
   - 不要在没有理解设计的情况下开始编码

4. **开始开发**
   - 严格按照设计文档进行开发
   - 如有设计变更需求，先更新设计文档，再修改代码

#### 1.3 各模块对应的设计文档

| 模块 | 设计文档路径 | 主要内容 |
|------|------------|---------|
| 架构设计 | `docs/design/ARCHITECTURE.md` | 技术架构、项目结构、核心模块设计、性能优化 |
| API集成 | `docs/design/API_INTEGRATION.md` | API客户端配置、接口封装、类型定义、使用示例 |
| 认证模块 | `docs/design/auth/FRONTEND_AUTH.md` | 认证流程、状态管理、路由守卫、登录注册页面 |

### 2. 代码规范

#### 2.1 文件组织

- 遵循 Vue 3 最佳实践
- 按功能模块组织文件
- 组件、页面、工具函数分类清晰

```
src/
├── api/          # API接口封装
├── components/   # 公共组件
├── views/        # 页面视图
├── stores/       # 状态管理
├── router/       # 路由配置
├── utils/        # 工具函数
└── types/        # 类型定义
```

#### 2.2 命名规范

- 组件文件：PascalCase（如：`UserProfile.vue`）
- 工具文件：camelCase（如：`formatDate.ts`）
- 常量：UPPER_SNAKE_CASE（如：`API_BASE_URL`）
- 变量/函数：camelCase（如：`getUserInfo`）

#### 2.3 组件规范

- 使用 Composition API
- Props 和 Emits 必须定义类型
- 复杂组件必须有注释说明
- 组件职责单一，可复用

### 3. 设计文档更新规范

#### 3.1 何时更新设计文档

- 新增功能模块时，必须先创建或更新设计文档
- 修改现有功能时，如果涉及架构变更，必须先更新设计文档
- 新增组件时，如果组件设计有特殊说明，需要更新文档

#### 3.2 如何更新设计文档

1. 在 `docs/` 目录下找到对应的设计文档
2. 更新相关章节
3. 更新文档的"最后更新日期"
4. 在提交代码时，同时提交设计文档的更新

### 4. API调用规范

#### 4.1 API封装

- 所有API调用必须通过 `src/api/` 目录下的封装
- 使用统一的请求客户端
- 统一的错误处理
- TypeScript类型定义

#### 4.2 API使用

- 严格按照设计文档中的API定义调用
- 使用设计文档中提供的类型定义
- 错误处理完善

### 5. 状态管理规范

#### 5.1 Store设计

- 使用Pinia进行状态管理
- Store按功能模块划分
- 状态、getters、actions组织清晰

#### 5.2 Store使用

- 在组件中使用 `useStore()` 获取store实例
- 避免直接修改state，通过actions修改
- 复杂状态逻辑封装在actions中

### 6. 路由规范

#### 6.1 路由设计

- 路由按功能模块组织
- 使用路由元信息（meta）控制权限
- 路由守卫统一处理

#### 6.2 路由使用

- 使用命名路由
- 路由参数类型定义
- 路由守卫检查权限

### 7. 组件开发规范

#### 7.1 组件设计

- 组件职责单一
- Props验证完整
- 事件命名清晰
- 插槽使用合理

#### 7.2 组件文档

- 复杂组件必须有使用说明
- Props和Events必须有注释
- 提供使用示例

### 8. 样式规范

#### 8.1 样式组织

- 使用scoped样式
- 避免全局样式污染
- 使用CSS变量统一主题

#### 8.2 响应式设计

- 使用Element Plus的响应式布局
- 移动端适配
- 断点使用规范

### 9. 测试规范

#### 9.1 单元测试

- 核心工具函数必须有单元测试
- 复杂组件逻辑需要测试

#### 9.2 E2E测试

- 关键业务流程需要E2E测试
- 登录、注册等核心功能测试

### 10. 提交规范

#### 10.1 Commit Message

遵循 Conventional Commits 规范：

```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式
refactor: 重构
test: 测试
chore: 构建/工具
```

#### 10.2 提交内容

- 代码变更
- 设计文档更新（如有）
- 测试用例
- 相关配置文件

### 11. 代码审查检查清单

在提交代码审查前，请确认：

- [ ] 已阅读并理解相关模块的设计文档
- [ ] 代码实现符合设计文档
- [ ] 已添加必要的注释
- [ ] TypeScript类型定义完整
- [ ] 已添加单元测试（如需要）
- [ ] 已更新相关文档（如有变更）
- [ ] 代码通过ESLint检查
- [ ] 提交信息符合规范

## 📚 相关文档

- [文档导航](../README.md) - 查看所有文档
- [架构设计](../design/ARCHITECTURE.md) - 前端架构设计
- [API集成](../design/API_INTEGRATION.md) - API集成指南

## ⚠️ 重要提醒

**开发前不阅读设计文档，可能导致：**
- 实现与设计不一致
- 需要大量返工
- 代码质量问题
- 组件设计混乱
- API调用错误

**请务必在开始编码前，先阅读并理解设计文档！**

## 🔍 快速查找设计文档

### 开发新功能时
1. 查看 `../design/ARCHITECTURE.md` 了解整体架构
2. 查看对应模块的设计文档（如有）

### 集成API时
1. 查看 `../design/API_INTEGRATION.md` 了解API调用方式
2. 查看后端API设计文档（Lemon项目）

### 开发认证功能时
1. 查看 `../design/auth/FRONTEND_AUTH.md` 了解认证流程
2. 查看后端认证设计文档（Lemon项目）
